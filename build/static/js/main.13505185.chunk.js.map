{"version":3,"sources":["services.js","index.js"],"names":["baseUrl","services","getAll","axios","get","then","response","data","create","newPerson","post","remove","personId","delete","update","updatedPerson","put","Filter","value","handleFilterChange","onChange","PersonForm","newName","newNumber","handleNameChange","handleNumberChange","addPerson","console","log","onSubmit","type","Persons","persons","filter","removePerson","filteredPersons","person","name","toLowerCase","includes","map","number","onClick","App","useState","setPersons","setNewName","setNewNumber","setFilter","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","personsService","className","event","target","preventDefault","existingPersonWithName","find","window","confirm","id","newPersons","catch","error","concat","setTimeout","personToRemove","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.13505185.chunk.js","sourcesContent":["import axios from 'axios';\nconst baseUrl = '/api/persons';\n\nconst getAll = () => {\n    return axios.get(baseUrl).then(response => response.data);\n}\n\nconst create = (newPerson) => {\n    return axios.post(baseUrl, newPerson).then(response => response.data);\n}\n\nconst remove = (personId) => {\n    return axios.delete(`${baseUrl}/${personId}`).then(response => response.data);\n}\n\nconst update = (personId, updatedPerson) => {\n    return axios.put(`${baseUrl}/${personId}`, updatedPerson).then(response => response.data);\n}\n\nconst services = {getAll, create, remove, update};\n\nexport default services;","import React, {useEffect, useState} from 'react';\nimport ReactDOM from 'react-dom';\nimport personsService from './services';\nimport './index.css';\n\nconst Filter = ({value, handleFilterChange}) => {\n  return <div>filter shown with <input value={value} onChange={handleFilterChange}/></div>;\n}\n\nconst PersonForm = ({newName, newNumber, handleNameChange, handleNumberChange, addPerson}) => {\n  console.log('rendering personform');\n  return <form onSubmit={addPerson}>\n    <div>\n      name: <input value={newName} onChange={handleNameChange}/>\n    </div>\n    <div>\n      number: <input value={newNumber} onChange={handleNumberChange}/>\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>;\n}\n\nconst Persons = ({persons, filter, removePerson}) => {\n  let filteredPersons = persons;\n  if(filter!==''){\n    filteredPersons = persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()));\n  }\n\n  return <div>{filteredPersons.map(person => <p key={person.name}>{person.name} {person.number} <button onClick={() => removePerson(person)}>delete</button></p>)}</div>;\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ filter, setFilter ] = useState('');\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  }\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value);\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    \n    const newPerson = {name: newName, number: newNumber};\n    const existingPersonWithName = persons.find(person => person.name.toLowerCase() === newName.toLowerCase());\n\n    if(existingPersonWithName){\n      const shouldUpdate = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`);\n      if(shouldUpdate){\n        personsService.update(existingPersonWithName.id, newPerson).then(response => {\n          const newPersons = persons.map(person => person.id === existingPersonWithName.id ? response : person);\n          setPersons(newPersons);\n        }).catch(error => {\n          console.log('error', error.response.data);\n          setErrorMessage(error.response.data.error);\n        });\n      }\n    } else {\n      personsService.create(newPerson).then(response => {\n        setPersons(persons.concat(response));\n        setSuccessMessage(`Added ${newPerson.name}`);\n        window.setTimeout(()=>setSuccessMessage(null), 3000); //remove after 3 seconds\n      }).catch(error => {\n        console.log('error', error.response.data);\n        setErrorMessage(error.response.data.error);\n      });\n    }\n  }\n\n  const removePerson = (personToRemove) => {\n    const shouldRemove = window.confirm(`Delete ${personToRemove.name}?`);\n    if(shouldRemove){\n      personsService.remove(personToRemove.id).then(() => {\n        const newPersons = persons.filter(person => person.id!==personToRemove.id);\n        setPersons(newPersons);\n      }).catch(error => {\n        console.log('error', error);\n        setErrorMessage(`Information of ${personToRemove.name} has already been removed from the server`);\n      });\n    }\n  }\n\n  useEffect(()=>{\n    personsService.getAll().then((response) => {\n      setPersons(response);\n    });\n  }, []);\n  \n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {successMessage && <div className=\"success-message\">{successMessage}</div>}\n      {errorMessage && <div className=\"error-message\">{errorMessage}</div>}\n      <Filter value={filter} handleFilterChange={handleFilterChange}/>\n      <h3>Add a new</h3>\n      <PersonForm newName={newName} newNumber={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} addPerson={addPerson}/>\n      <h3>Numbers</h3>\n      <Persons persons={persons} filter={filter} removePerson={removePerson}/>\n    </div>\n  )\n}\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}